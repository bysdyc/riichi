# 副露区功能测试清单

## 🧪 测试目的
验证副露区的所有功能是否正确实现，符数计算是否准确。

## ✅ 基础功能测试

### 1. 添加副露 - 吃（chi）

#### 测试用例 1.1：正常添加吃
- [ ] 点击"+ 吃（顺子）"按钮
- [ ] 选择同花色连续数字：1万、2万、3万
- [ ] 点击"确定添加"
- [ ] 验证：副露区显示"吃"，包含3张牌，橙色边框（明副露）
- [ ] 验证：门清状态变为 false

#### 测试用例 1.2：吃 - 不同花色错误
- [ ] 点击"+ 吃（顺子）"
- [ ] 选择不同花色：1万、2饼、3索
- [ ] 点击"确定添加"
- [ ] 验证：显示错误提示"吃必须是同花色"

#### 测试用例 1.3：吃 - 数字不连续错误
- [ ] 点击"+ 吃（顺子）"
- [ ] 选择同花色不连续：1万、3万、5万
- [ ] 点击"确定添加"
- [ ] 验证：显示错误提示"吃必须是连续的数字"

#### 测试用例 1.4：吃 - 字牌错误
- [ ] 点击"+ 吃（顺子）"
- [ ] 尝试选择字牌：东、南、西
- [ ] 点击"确定添加"
- [ ] 验证：显示错误提示"吃只能是数牌"

### 2. 添加副露 - 碰（pon）

#### 测试用例 2.1：正常添加碰
- [ ] 点击"+ 碰（刻子）"
- [ ] 选择3张相同牌：中、中、中
- [ ] 点击"确定添加"
- [ ] 验证：副露区显示"碰"，包含3张中，橙色边框
- [ ] 验证：门清状态变为 false

#### 测试用例 2.2：碰 - 不同牌错误
- [ ] 点击"+ 碰（刻子）"
- [ ] 选择3张不同牌：东、南、西
- [ ] 点击"确定添加"
- [ ] 验证：显示错误提示"碰必须是相同的牌"

### 3. 添加副露 - 明杠（minkan）

#### 测试用例 3.1：正常添加明杠
- [ ] 点击"+ 明杠"
- [ ] 选择4张相同牌：9万、9万、9万、9万
- [ ] 点击"确定添加"
- [ ] 验证：副露区显示"明杠"，包含4张9万，橙色边框
- [ ] 验证：门清状态变为 false

#### 测试用例 3.2：明杠 - 不同牌错误
- [ ] 点击"+ 明杠"
- [ ] 选择4张不同牌
- [ ] 验证：显示错误提示"杠必须是相同的牌"

### 4. 添加副露 - 暗杠（ankan）

#### 测试用例 4.1：正常添加暗杠
- [ ] 点击"+ 暗杠"
- [ ] 选择4张相同牌：发、发、发、发
- [ ] 点击"确定添加"
- [ ] 验证：副露区显示"暗杠"，包含4张发，绿色边框（暗副露）
- [ ] 验证：门清状态保持 true（暗杠不破坏门清）

### 5. 删除副露

#### 测试用例 5.1：删除单个副露
- [ ] 添加一个碰（中中中）
- [ ] 点击该副露的"删除"按钮
- [ ] 验证：副露从副露区移除
- [ ] 验证：门清状态恢复为 true（如果没有其他明副露）

#### 测试用例 5.2：清空所有副露
- [ ] 添加多个副露（吃、碰、明杠）
- [ ] 点击"清空副露"按钮
- [ ] 验证：所有副露被清除
- [ ] 验证：门清状态恢复为 true

### 6. 门清状态管理

#### 测试用例 6.1：明副露破坏门清
- [ ] 确认初始门清状态为 true
- [ ] 添加吃（1万2万3万）
- [ ] 验证：门清状态变为 false
- [ ] 删除吃
- [ ] 验证：门清状态恢复为 true

#### 测试用例 6.2：暗杠不破坏门清
- [ ] 确认初始门清状态为 true
- [ ] 添加暗杠（东东东东）
- [ ] 验证：门清状态保持 true

#### 测试用例 6.3：混合副露门清状态
- [ ] 添加暗杠（东东东东）- 门清 true
- [ ] 添加碰（中中中）- 门清变为 false
- [ ] 删除碰 - 门清恢复为 true
- [ ] 验证：只剩暗杠时门清为 true

## 📊 符数计算测试

### 7. 碰的符数计算

#### 测试用例 7.1：中张牌明刻
- [ ] 手牌：1万2万3万 4万5万6万 白白（7张）
- [ ] 副露：碰（5饼5饼5饼）
- [ ] 和牌：7万（自摸）
- [ ] 预期符数：
  - 底符 20
  - 碰（5饼，中张牌明刻）+2
  - 雀头（白白，三元牌）+2
  - 自摸 +2
  - **总计：26 → 30符**

#### 测试用例 7.2：老头牌明刻
- [ ] 手牌：1万2万3万 4万5万6万 东东（7张）
- [ ] 副露：碰（9索9索9索）
- [ ] 和牌：7万（荣和）
- [ ] 预期符数：
  - 底符 20
  - 碰（9索，老头牌明刻）+4
  - 雀头（东东，役牌）+2
  - **总计：26 → 30符**

#### 测试用例 7.3：字牌明刻
- [ ] 手牌：1万2万3万 4万5万6万 5饼5饼（7张）
- [ ] 副露：碰（中中中）
- [ ] 和牌：6万（荣和）
- [ ] 预期符数：
  - 底符 20
  - 碰（中，字牌明刻）+4
  - **总计：24 → 30符**

### 8. 杠的符数计算

#### 测试用例 8.1：明杠 - 中张牌
- [ ] 手牌：1万2万3万 东东东 白白（7张）
- [ ] 副露：明杠（5饼5饼5饼5饼）
- [ ] 和牌：东（自摸）
- [ ] 预期符数：
  - 底符 20
  - 明杠（5饼，中张牌）+8
  - 刻子（东东东，字牌暗刻，因为自摸）+8
  - 雀头（白白，三元牌）+2
  - 自摸 +2
  - **总计：40符**

#### 测试用例 8.2：明杠 - 老头牌
- [ ] 手牌：2万3万4万 5万6万7万 东东（7张）
- [ ] 副露：明杠（1万1万1万1万）
- [ ] 和牌：8万（荣和）
- [ ] 预期符数：
  - 底符 20
  - 明杠（1万，老头牌）+16
  - 雀头（东东，役牌）+2
  - **总计：38 → 40符**

#### 测试用例 8.3：暗杠 - 中张牌
- [ ] 手牌：1万2万3万 4万5万6万 东东（7张）
- [ ] 副露：暗杠（5饼5饼5饼5饼）
- [ ] 和牌：7万（荣和，门清）
- [ ] 预期符数：
  - 底符 20
  - 暗杠（5饼，中张牌）+16
  - 门清荣和 +10
  - 雀头（东东，役牌）+2
  - **总计：48 → 50符**

#### 测试用例 8.4：暗杠 - 字牌
- [ ] 手牌：1万2万3万 4万5万6万 5饼5饼（7张）
- [ ] 副露：暗杠（发发发发）
- [ ] 和牌：7万（荣和，门清）
- [ ] 预期符数：
  - 底符 20
  - 暗杠（发，字牌）+32
  - 门清荣和 +10
  - **总计：62 → 70符**

### 9. 吃的符数计算

#### 测试用例 9.1：吃不加符
- [ ] 手牌：1万2万3万 白白白 东东（7张）
- [ ] 副露：吃（4饼5饼6饼）
- [ ] 和牌：白（荣和）
- [ ] 预期符数：
  - 底符 20
  - 吃（4饼5饼6饼）+0（顺子不加符）
  - 刻子（白白白，字牌明刻，因为副露所以是明刻）...等等
  - **需要根据具体手牌计算**

### 10. 复杂副露组合

#### 测试用例 10.1：多个副露
- [ ] 手牌：1万2万3万 东东（5张）
- [ ] 副露1：吃（4饼5饼6饼）
- [ ] 副露2：碰（9索9索9索）
- [ ] 和牌：东（自摸）
- [ ] 预期符数：
  - 底符 20
  - 吃（4饼5饼6饼）+0
  - 碰（9索，老头牌明刻）+4
  - 刻子（东东东，字牌暗刻，自摸）+8
  - 自摸 +2
  - **总计：34 → 40符**

#### 测试用例 10.2：暗杠+明刻
- [ ] 手牌：1万2万3万 中中中 5饼5饼（7张）
- [ ] 副露：暗杠（东东东东）
- [ ] 和牌：6饼（荣和）
- [ ] 预期符数：
  - 底符 20
  - 暗杠（东，字牌）+32
  - 刻子（中中中，字牌暗刻）+8
  - 门清荣和 +10（暗杠不破坏门清）
  - **总计：70符**

## 💾 数据持久化测试

### 11. 保存和加载

#### 测试用例 11.1：刷新页面保留副露
- [ ] 添加2-3个副露（不同类型）
- [ ] 刷新页面
- [ ] 验证：副露数据完整保留
- [ ] 验证：门清状态正确恢复

#### 测试用例 11.2：重置游戏清空副露
- [ ] 添加若干副露
- [ ] 点击"重置游戏"
- [ ] 验证：副露区被清空
- [ ] 验证：门清状态恢复为 true

## 🎯 边界情况测试

### 12. 边界和异常情况

#### 测试用例 12.1：最多副露数量
- [ ] 连续添加4个副露
- [ ] 验证：所有副露都能正常添加和显示

#### 测试用例 12.2：取消添加
- [ ] 点击添加副露
- [ ] 选择部分牌
- [ ] 点击"取消"
- [ ] 验证：副露未被添加

#### 测试用例 12.3：牌数限制
- [ ] 尝试添加吃时选择4张牌
- [ ] 验证：只能选择3张，第4张被禁用

## 📋 UI/UX测试

### 13. 界面和交互

#### 测试用例 13.1：副露显示
- [ ] 添加各类型副露
- [ ] 验证：明副露显示橙色边框
- [ ] 验证：暗副露显示绿色边框
- [ ] 验证：副露类型标签正确显示

#### 测试用例 13.2：对话框交互
- [ ] 打开添加副露对话框
- [ ] 验证：已选牌实时更新
- [ ] 验证：选满后其他牌自动禁用
- [ ] 验证：可以删除已选牌

#### 测试用例 13.3：错误提示
- [ ] 尝试添加不合法的副露
- [ ] 验证：错误信息清晰明确
- [ ] 验证：错误提示为红色高亮

## ✅ 测试结果记录

### 测试环境
- 浏览器：________________
- 日期：________________
- 测试人：________________

### 总体评估
- [ ] 所有基础功能正常
- [ ] 符数计算准确
- [ ] 门清状态管理正确
- [ ] 数据持久化有效
- [ ] UI/UX体验良好

### 发现的问题
1. ________________
2. ________________
3. ________________

### 建议改进
1. ________________
2. ________________
3. ________________

---

**测试版本**：v4.1
**测试状态**：⏳ 待测试
