# 状况役UI和逻辑优化说明

## 修改日期
2025年10月31日

## 优化目标
改进状况役的用户界面和交互逻辑，提升用户体验和功能可用性。

## 主要优化内容

### 1. 数据结构增强 (index.js)

#### 新增状况役信息配置
```javascript
const STATUS_INFO = {
  isRiichi: { name: '立直', desc: '门清听牌宣告立直', han: '1番' },
  isDoubleRiichi: { name: '二立直', desc: '首巡立直', han: '2番' },
  isIppatsu: { name: '一发', desc: '立直后一巡内和牌', han: '+1番' },
  // ... 其他状况役
}
```

#### 增强配置信息
- 为每个状况役添加名称、描述和番数信息
- 优化 `STATUS_TOGGLE_CONFIG`，添加更详细的元数据

### 2. 界面布局优化 (index.wxml)

#### 整体结构改进
- **分类展示**：将状况役按类型分为4个类别
  - 💎 立直系（立直、二立直、一发）
  - ⭐ 役满/特殊役（天和、地和、人和）
  - 🎯 牌山边缘（海底、河底）
  - 🎴 杠相关（岭上、抢杠）

#### 状态摘要优化
- **分组显示**：按照牌型、立直、特殊、其他分组
- **标签分类**：使用不同颜色和样式标识不同类型
  - 门清/副露状态
  - 立直相关役（蓝色）
  - 役满（金色渐变）
  - 特殊役（紫色渐变）
  - 普通役（蓝色）

#### 按钮改进
- **双行布局**：显示役名和番数
- **视觉层次**：清晰的标题和番数分离
- **状态反馈**：激活状态有渐变色和阴影效果

#### 提示信息
- 添加类别说明，解释每类状况役的条件
- 添加底部提示区域，说明互斥关系和自动切换机制

### 3. 样式优化 (index.wxss)

#### 整体设计
- **渐变背景**：状况役区域使用微妙的渐变背景
- **卡片式布局**：状态摘要使用白色卡片展示
- **分组标签**：标签按类型使用不同配色

#### 按钮样式
```css
.status-btn {
  display: flex;
  flex-direction: column;
  padding: 12rpx 20rpx;
  min-height: 72rpx;
  border: 2rpx solid #e2e8f0;
  gap: 4rpx;
  transition: all 0.2s ease;
}
```

#### 特殊状态样式
- **激活状态**：绿色渐变 + 阴影 + 轻微上浮动画
- **役满激活**：金色渐变（#fbbf24 → #f59e0b）
- **特殊役激活**：紫色渐变（#818cf8 → #6366f1）
- **禁用状态**：半透明灰色

#### 标签样式
- **门清标签**：绿色（#bbf7d0）
- **副露标签**：红色（#fecaca）
- **激活标签**：蓝色（#dbeafe）
- **役满标签**：金色渐变边框
- **特殊标签**：紫色渐变边框

### 4. 交互逻辑优化 (index.js)

#### 智能提示
- 更友好的错误提示信息
  ```javascript
  this.showToast(`${config.name}需门前清才可选择`);
  ```
- 自动模式切换提示
  ```javascript
  this.showToast(`已自动切换为自摸模式`);
  ```

#### 自动化处理
- 选择特定状况役时自动切换和牌模式（自摸/荣和）
- 自动处理互斥关系
- 自动清除不兼容的状况役

### 5. 用户体验提升

#### 信息可见性
- ✅ 当前已选状况役一目了然
- ✅ 每个状况役的番数清晰展示
- ✅ 分类标题帮助理解状况役类型

#### 操作便捷性
- ✅ 折叠功能节省屏幕空间
- ✅ 按钮大小和间距适合点击
- ✅ 禁用状态明确提示不可用原因

#### 视觉反馈
- ✅ 激活状态有明显的颜色和动画变化
- ✅ 不同类型役有不同的视觉标识
- ✅ 渐变和阴影增强层次感

#### 学习辅助
- ✅ 类别说明帮助理解条件
- ✅ 底部提示说明互斥规则
- ✅ 番数显示帮助计分

## 技术亮点

1. **渐变设计**：使用CSS渐变实现更精致的视觉效果
2. **分类组织**：将10个状况役合理分为4类，降低认知负担
3. **响应式布局**：flexbox实现自适应布局
4. **微动画**：激活状态的轻微上浮效果增强交互感
5. **信息密度**：在有限空间内展示更多有用信息

## 前后对比

### 优化前
- 简单的按钮列表
- 只显示状况役名称
- 缺少分类和说明
- 提示信息不够友好

### 优化后
- 分类清晰的卡片式布局
- 显示役名 + 番数
- 类别标题和说明
- 互斥规则和自动切换说明
- 更丰富的视觉反馈
- 更友好的提示信息

## 适用场景

这套优化特别适合：
- 📱 移动端小屏幕设备
- 🎓 需要学习日麻规则的新手
- ⚡ 需要快速录入的熟练玩家
- 🎯 追求精确记录的严谨用户

## 未来可扩展方向

1. 添加状况役的详细说明弹窗
2. 实现状况役的快捷预设组合
3. 添加历史常用状况役的智能推荐
4. 支持自定义状况役的显示顺序
