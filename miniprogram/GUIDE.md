# 使用指南

## 📖 目录
1. [快速开始](#快速开始)
2. [手牌输入模式详解](#手牌输入模式详解)
3. [手动输入模式](#手动输入模式)
4. [多人和牌模式](#多人和牌模式)
5. [常见问题](#常见问题)

---

## 快速开始

### 第一步：创建游戏
1. 打开小程序，进入首页
2. 选择游戏类型：
   - 🎴 东风战（东场4局）
   - 🀄 半庄战（东南8局）
   - 🎯 一庄战（16局）
3. 可选：勾选"东场飞び"（破产终止）
4. 点击游戏类型卡片开始

### 第二步：进行游戏
- 查看玩家信息和分数
- 点击"立直"按钮管理立直状态
- 点击"和牌"记录和牌
- 点击"流局"记录流局

---

## 手牌输入模式详解

### 适用场景
- 想要自动分析役种
- 学习麻将规则
- 记录详细牌谱

### 操作步骤

#### 1. 选择手牌（13张）
```
点击 "+选择手牌" 按钮
→ 在弹出的牌选择器中选择13张牌
→ 每种牌最多选4张
→ 点击"确定"
```

**提示**：
- 手牌区显示已选牌张
- 右上角显示"已选/总数"
- 点击牌上的×可删除

#### 2. 添加副露（可选）
如果有吃、碰、杠：
```
点击 "+添加副露" 按钮
→ 选择副露类型：
   • 顺子（3张连续牌）
   • 碰（3张相同牌）
   • 明杠（4张明杠）
   • 暗杠（4张暗杠）
→ 选择3或4张牌
→ 点击"确定"
```

**注意**：
- 副露会减少手牌数量
- 最多4组副露
- 副露影响某些役（如平和）

#### 3. 选择和牌（1张）
```
点击 "选择和牌" 按钮
→ 选择第14张和牌
→ 点击"确定"
```

#### 4. 设置状况役
根据实际情况勾选：
- ☑️ 立直：宣告立直
- ☑️ 一发：立直后一巡内和牌
- ☑️ 双立直：第一巡立直
- ☑️ 海底：最后一张自摸和
- ☑️ 河底：最后一张荣和
- ☑️ 岭上：杠后和牌
- ☑️ 抢杠：抢别人的加杠

#### 5. 分析牌型
```
点击 "分析牌型" 按钮
→ 系统自动识别：
   • 役种（如：清一色、平和等）
   • 番数
   • 符数
→ 显示分析结果
```

**识别的役种包括**：
- 役满：国士、四暗刻、大三元等
- 一般役：清一色、对对和、平和等
- 复合役：自动处理

#### 6. 完成记录
```
→ 选择和牌者
→ 选择自摸/荣和
→ 如果荣和，选择放铳者
→ 输入宝牌数量（表宝、里宝、红宝）
→ 点击"确认"
```

### 示例：记录一个清一色

1. **选择手牌**：
   ```
   1万 1万 2万 3万 4万 5万 6万 7万 8万 9万 9万 9万 9万
   ```

2. **选择和牌**：
   ```
   5万
   ```

3. **分析结果**：
   ```
   役种：清一色、对对和、混老头
   9番 40符
   ```

4. **输入宝牌**：
   ```
   表宝：2
   总计：11番
   ```

5. **确认记录**

---

## 手动输入模式

### 适用场景
- 熟悉麻将规则
- 快速记录对局
- 已知番数和符数

### 操作步骤

#### 1. 选择和牌方式
```
• 自摸：自己摸牌和牌
• 荣和：别人打出的牌
```

#### 2. 选择玩家
```
→ 选择和牌者
→ 如果荣和，选择放铳者
```

#### 3. 输入番符
```
→ 番数：1-13（役满13+）
→ 符数：20、25、30、40、50、60、70等
```

**常见番符**：
- 1番30符：基础荣和
- 1番40符：基础自摸
- 2番30符：七对子
- 3番60符：对对和+役牌
- 13番：役满

#### 4. 输入宝牌
```
→ 表宝：0-N
→ 里宝：0-N（需立直）
→ 红宝：0-3
```

#### 5. 确认记录

---

## 多人和牌模式

### 适用场景
- 三家和（三麻）
- 2-3人同时荣和同一张牌

### 规则说明
- 只能是荣和（不能自摸）
- 放铳者支付所有点数
- 立直棒平均分配
- 如有庄家和牌则连庄

### 操作步骤

#### 1. 选择放铳者
```
点击放铳者的玩家按钮
→ 必须先选择放铳者
→ 被选中的玩家不能是和牌者
```

#### 2. 选择和牌者（2-3人）
```
勾选和牌者的复选框
→ 至少2人
→ 最多3人
→ 不能包含放铳者
```

#### 3. 为每位和牌者设置番符
```
在每位和牌者下方：
→ 输入番数
→ 输入符数
```

**示例**：
```
放铳者：玩家甲
和牌者1：玩家乙 - 2番30符
和牌者2：玩家丙 - 3番40符
```

#### 4. 确认记录
```
点击"确认"
→ 系统自动计算：
   • 每位和牌者得分
   • 放铳者失分
   • 立直棒分配
   • 本场费分配
```

### 计算示例

**场景**：
- 放铳者：闲家甲
- 和牌者1：闲家乙（2番30符）→ 2000点
- 和牌者2：庄家丙（3番40符）→ 3900点
- 立直棒：2本（2000点）

**结果**：
```
甲：-5900 - 2000 = -7900
乙：+2000 + 1000 = +3000
丙：+3900 + 1000 = +4900
```

---

## 常见问题

### Q1: 手牌输入后提示"牌数不正确"？
**A**: 确保手牌+副露+和牌=14张
- 无副露：13张手牌 + 1张和牌
- 1组副露：10张手牌 + 3张副露 + 1张和牌
- 2组副露：7张手牌 + 6张副露 + 1张和牌

### Q2: 分析结果显示"无役"？
**A**: 检查以下几点：
- 是否真的有役种？
- 是否缺少状况役（如立直）？
- 副露是否导致某些役失效（如平和）？

### Q3: 七对子如何输入？
**A**: 
1. 直接选择7对共14张牌作为手牌
2. 不选择和牌（系统自动识别）
3. 点击"分析牌型"

### Q4: 国士无双如何输入？
**A**:
1. 选择13种幺九牌各1张，1种2张
2. 选择和牌（组成对子的那张）
3. 系统自动判断是否13面待

### Q5: 立直后和牌如何记录宝牌？
**A**:
- 表宝：正常输入
- 里宝：输入立直后可看的里宝数
- 红宝：输入手牌中的红五万/筒/索

### Q6: 如何取消立直状态？
**A**: 再次点击玩家卡片下方的"取消立直"按钮，会退还1000点

### Q7: 流局如何处理？
**A**:
1. 点击"流局"按钮
2. 选择听牌的玩家
3. 系统自动计算3000点分配

### Q8: 游戏如何结束？
**A**: 自动判断：
- 完成所有规定局数
- 有玩家破产（开启飞び时）

### Q9: 如何查看历史记录？
**A**: 点击"历史"按钮，查看所有和牌和流局记录

### Q10: 数据会丢失吗？
**A**: 不会，所有数据保存在本地，除非：
- 主动清除存档
- 卸载小程序并清除数据

---

## 💡 使用技巧

### 快速记录
- 熟悉规则后使用"手动输入"模式
- 预设常用番符组合

### 学习工具
- 使用"手牌输入"模式学习役种
- 观察不同牌型的分析结果

### 多人对局
- 每局立即记录，避免遗忘
- 使用立直功能自动管理1000点

### 数据管理
- 定期查看历史记录
- 游戏结束后查看最终排名

---

**需要帮助？** 参考README.md或查看在线文档。
